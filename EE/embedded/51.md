# Toolchain

## SDCC

- A host of standard optimization

- Inline Assembly

### Components

- `sdcc`: the compiler

- `sdcpp`: C preprocessor

- `sdas*`: assemberls

- `sdld`: the linker for 8051 and STM8

- simulators

- `sdcdb`: the source debugger

- `sdcclib`: deprecated

- `sdar, sdranlib, sdnm, sdobjcopy`: archive managing and indexing utilities

- `packihx`: pack/compress Intel hex files

- `makebin`: convert Intel Hex file to a binary

- `<installdir>/share/sdcc/include`: the include files

- `<installdir>/share/sdcc/lib`: the precompiled relocatables

### Data Types

- `_Bool`/`bool`: 8 bits, unsigned

- `char`: 8 bits, unsigned

- `short`: 16 bits

- `int`: 16 bits

- `long`: 32 bits

- `long long`: 64 bits

- `float`: 4 bytes similar to IEEE754

- `pointer`: 1, 2, 3 or 4 bytes generic

- `__bit`: 1 bit unsigned

### Standard Compliance

- C90: `--std-c89`, struct and unions cannot be assigned values directly, nor can be used as function parameters or return type. Initialization of structure arrays must be fully braced. `double` not supported. Functions are not reentrant unless explicitly declared as such. or `--stack-auto` is specified in `mcs51` port.

- C95: `--std-c95`

- C99: `--std-c99`: compound literals, variable-length arrays, and a lot of long data types are not supported. 

- C11: `--std-c11`: same as above

- C2x: incomplete

### Usage

#### Output

- `src.asm`: assmbler source file

- `src.lst`: assembler listing file

- `src.rst`: listing file updated with linkedit information, created by linkage editor

- `src.sym`: symbol listing

- `src.rel`: object file

- `src.map`: memory map for the load module

- `src.mem`: a file with a summary of memory usage

- `src.ihx`: the load module in Intel hex format

- `src.cdb`: debug information

#### CMD Options

- `-m`: architecture type, defaulted to `mcs51`

- `-I`, `-L`,  `-D`, `-c`, `-E`, `-o`, `-S`, `-nostdinc`, `-nostdlib`: same as in GCC

- `--stack-auto`: All functions in the source file will be compiled as reentrant, i.e. the parameters and local variables will be allocated on the stack.

- `callee-saves func1,func2...`: the compiler by default uses a caller saves convention for register saving across function calls. This option can be used to switch the register saving convention for specified functions.

- `--debug`

- `--cyclomatic`: cyclomatic complexity

- `--xram-loc`: the start location of the external RAM

- `--code-loc`: the start location of the code segment

- `--stack-loc`: the default behavior is placed after the data segment for mcs51

- `--xstack-loc`: by default the external stack is placed after `__pdata` segment

- `--data-loc`: internal RAM data segment

- `--idata-loc`: indirectly addressable internal RAM

... and a lot of other linker options

- `--model-small`/`--model-medium`/`--model-large`/`--model-huge`: for different memory models

## Language Extensions

- intrinsic named address spaces
